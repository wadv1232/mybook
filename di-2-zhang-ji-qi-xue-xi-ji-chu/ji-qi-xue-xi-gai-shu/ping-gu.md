# 分类模型评估

| 真实\预测 | 真 | 假 | 合计 |  |  |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 真 | TP 正类判定为正类 | FN 正类判定为负类,"去真" | condition positive  = TP + FN | **真阳性率 TPR** = TP/condition positive &lt;br&gt;又称为 **灵敏度\(Sensitivity\), 召回率\(Recall\)** | 假阴性率 FNR = FN/condition positive  又称为 漏诊率 = 1- 灵敏度 |
| 假 | FP 负类判定为正类,"存伪" | TN 负类判定为负类 | condition negative = FP + TN | 假阳性率 FPR = FP/condition negative  又称为 误诊率 = 1 - 特异度 | **真阴性率 TNR** = TN/condition negtive &lt;br&gt; 又称 **特异度\(specificity\)** |

$$P = TP/（TP+FP）$$

$$R = TP/(TP + FN) $$

## 实例解释 {#实例解释}

下面以医学中[糖尿病](https://www.baidu.com/s?wd=糖尿病&tn=24004469_oem_dg&rsv_dl=gh_pl_sl_csd)人的筛查为例对敏感度和特异度进行解释。在这个例子中，我们只将病人血糖水平作为判断是否患有糖尿病的指标。下图为正常人和糖尿病患者血糖水平的统计图：

![](/assets/糖尿病血糖水平.png)我们发现两个人群中有重叠的部分，这个时候判定标准定的不同，得到的结果就会不同。 

如果我们把标准定在最左边的虚线上，则低于这条线的为正常人，高于这条线的包含了两类人：正常人和糖尿病患者。这种时候就是灵敏度最高的时候，即实际有病而被诊断出患病的概率，没有放过一个患病的人。如果将标准定在最右边的虚线上，则是特异度最高的时候，即实际没病而被诊断为正常的概率，没有冤枉一个没病的人。 

终上所述，敏感度高=漏诊率低，特异度高=误诊率低。 

理想情况下我们希望敏感度和特异度都很高，然而实际上我们一般在敏感度和特异度中寻找一个平衡点，这个过程可以用ROC\(Receiver Operating Characteristic\)曲线来表示：

![](/assets/糖尿病ROC曲线.png)

### 为什么使用ROC曲线 {#为什么使用roc曲线}

既然已经这么多评价标准，为什么还要使用ROC和AUC呢？因为ROC曲线有个很好的特性：当测试集中的正负样本的分布变化的时候，ROC曲线能够保持不变。在实际的数据集中经常会出现类不平衡\(class imbalance\)现象，即负样本比正样本多很多\(或者相反\)，而且测试数据中的正负样本的分布也可能随着时间变化。

